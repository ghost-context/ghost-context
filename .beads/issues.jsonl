{"id":"ghost-context-08m","title":"Test: Alchemy ENS Resolution Endpoint","description":"Verify /api/alchemy/resolve-name resolves ENS names.\n\nTest:\ncurl -s \"https://ghost-context.vercel.app/api/alchemy/resolve-name?name=vitalik.eth\"\n\nExpected: {\"address\":\"0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045\"}\n\nSuccess: Returns correct address for vitalik.eth","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:15.832256-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:15.832256-06:00"}
{"id":"ghost-context-0a8","title":"Test: E2E - Kindred Spirits Analysis","description":"Verify kindred spirits analysis workflow completes.\n\nManual test steps:\n1. Load collections for a wallet (e.g., vitalik.eth)\n2. Select 2-3 NFT collections with checkboxes\n3. Click \"Summon Kindred Spirits\" button\n4. Wait for analysis to complete\n\nSuccess criteria:\n- Loading modal appears with progress counter\n- Kindred spirits list populates after completion\n- Each spirit shows address, overlap count, social card\n- \"View More\" button opens detail modal\n- \"Download Kindred Spirits\" button works","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:48:06.797888-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:48:06.797888-06:00"}
{"id":"ghost-context-0vk","title":"Task 2: Fix Error Message Information Disclosure","description":"Genericize error messages in analyze endpoints to prevent stack trace leakage.\n\nFiles:\n- Modify: src/app/api/analyze-combined-overlap/route.js:308-312\n- Modify: src/app/api/analyze-erc20-overlap/route.js:142-146\n\nChange error handlers from:\n  JSON.stringify({ error: error.message })\nTo:\n  console.error('[route-name] error', { message: error.message, stack: error.stack?.slice(0, 500) });\n  JSON.stringify({ error: 'Internal server error' })\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:02:56.400278-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:09:29.522649-06:00","closed_at":"2026-02-01T18:09:29.522649-06:00","close_reason":"Genericized error messages in both analyze routes","dependencies":[{"issue_id":"ghost-context-0vk","depends_on_id":"ghost-context-en4","type":"blocks","created_at":"2026-02-01T18:04:01.524853-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-1jw","title":"Test: Alchemy Contract Metadata Endpoint","description":"Verify /api/alchemy/contract-metadata returns NFT contract info.\n\nTest:\ncurl -s \"https://ghost-context.vercel.app/api/alchemy/contract-metadata?network=ETH_MAINNET\u0026contract=0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D\"\n\nExpected: {\"name\":\"BoredApeYachtClub\",\"symbol\":\"BAYC\",...}\n\nSuccess: Returns contract name, symbol, tokenType","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:23.068359-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:23.068359-06:00"}
{"id":"ghost-context-1sf","title":"Test: CSRF Protection - Valid Origin","description":"Verify requests from allowed origins are accepted.\n\nTest:\ncurl -s -o /dev/null -w \"%{http_code}\" -X POST https://ghost-context.vercel.app/api/analyze-combined-overlap \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Origin: https://ghost-context.vercel.app\" \\\n  -d '{\"address\":\"0x0000000000000000000000000000000000000000\"}'\n\nExpected: 400 (validation error, NOT 403)\n\nSuccess: Request is processed (not blocked by CSRF)","status":"open","priority":1,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:26.374312-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:26.374312-06:00"}
{"id":"ghost-context-27t","title":"Test: CSRF Protection - Invalid Origin Blocked","description":"Verify requests from foreign origins are rejected with 403.\n\nTest:\ncurl -s -X POST https://ghost-context.vercel.app/api/analyze-combined-overlap \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Origin: https://evil.example.com\" \\\n  -d '{\"address\":\"0x123\"}'\n\nExpected: {\"error\":\"Invalid origin\"} with HTTP 403\n\nSuccess: Returns 403 Forbidden","status":"open","priority":1,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:28.822344-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:28.822344-06:00"}
{"id":"ghost-context-2aq","title":"Test: Rate Limiting Headers Present","description":"Verify rate limit headers are returned on API responses.\n\nTest:\ncurl -s -D - https://ghost-context.vercel.app/api/alchemy/network-mapping 2\u003e\u00261 | grep -i \"x-ratelimit\"\n\nExpected headers:\n- X-RateLimit-Limit\n- X-RateLimit-Remaining\n- X-RateLimit-Reset\n\nSuccess: All three headers present in response","status":"open","priority":1,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:39.106957-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:39.106957-06:00"}
{"id":"ghost-context-2g0","title":"Test: Error Handling - Invalid Address Format","description":"Verify API returns proper error for invalid addresses.\n\nTest:\ncurl -s -X POST https://ghost-context.vercel.app/api/analyze-combined-overlap \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Origin: https://ghost-context.vercel.app\" \\\n  -d '{\"address\":\"invalid\"}'\n\nExpected: {\"error\":\"Invalid address format...\"} with HTTP 400\n\nSuccess: Returns descriptive error message with 400 status","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:51.716598-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:51.716598-06:00"}
{"id":"ghost-context-2la","title":"Task 8: Create DataLoader Utility","description":"Create src/app/lib/data-loader.js for request batching and deduplication within a single tick.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:11.347643-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:51:19.279661-06:00","closed_at":"2026-02-01T14:51:19.279661-06:00","close_reason":"Created DataLoader utility"}
{"id":"ghost-context-4iz","title":"Task 6: Integrate Caching into Token Filtering","description":"Update get-filtered-tokens/route.js to cache holder counts in Vercel KV with 30-minute TTL.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:04.068543-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:49:31.861779-06:00","closed_at":"2026-02-01T14:49:31.861779-06:00","close_reason":"Holder count caching added with 30min TTL","dependencies":[{"issue_id":"ghost-context-4iz","depends_on_id":"ghost-context-hg1","type":"blocks","created_at":"2026-02-01T14:39:22.561347-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-525","title":"[Feature] Common Assets Optimization","status":"closed","priority":1,"issue_type":"feature","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T13:46:57.754764-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:26:39.502929-06:00","closed_at":"2026-02-01T14:26:39.502929-06:00","close_reason":"All tasks complete - optimization shipped","dependencies":[{"issue_id":"ghost-context-525","depends_on_id":"ghost-context-9pe","type":"blocks","created_at":"2026-02-01T13:47:06.132383-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-525","depends_on_id":"ghost-context-hzm","type":"blocks","created_at":"2026-02-01T13:47:06.643323-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-525","depends_on_id":"ghost-context-8fu","type":"blocks","created_at":"2026-02-01T13:47:07.115278-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-525","depends_on_id":"ghost-context-esf","type":"blocks","created_at":"2026-02-01T13:47:07.560915-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-525","depends_on_id":"ghost-context-d0h","type":"blocks","created_at":"2026-02-01T13:47:08.272632-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-5ue","title":"Test: E2E - Collection Filtering","description":"Verify collection filtering and sorting works.\n\nManual test steps:\n1. Load collections for a wallet\n2. Test name filter: type partial collection name\n3. Test network filter: select a specific network\n4. Test collection filter: switch between Relevant/Lenient/All\n5. Test sort: switch between Relevance/Newest\n\nSuccess criteria:\n- Name filter shows matching collections only\n- Network filter shows selected network only\n- Collection filter changes visible collections\n- Sort changes collection order","status":"open","priority":3,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:48:10.405225-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:48:10.405225-06:00"}
{"id":"ghost-context-6f4","title":"Task 13: Remove NEXT_PUBLIC Alchemy Keys","description":"Remove NEXT_PUBLIC Alchemy keys from codebase and environment.\n\nFiles:\n- Modify: src/app/alchemy-multichain-client.js (throw error if no keys provided)\n- Modify: .env.local.example (update to show server-side keys only)\n\nVercel dashboard:\n- Add: ALCHEMY_ETH_API_KEY, ALCHEMY_POLYGON_API_KEY, etc.\n- Remove (after verification): NEXT_PUBLIC_*_API_KEY\n\nVerify:\n- npm run build\n- grep -r 'NEXT_PUBLIC_ETH_MAIN_API_KEY' .next/static/ returns no matches","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:47.081081-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:35:50.404454-06:00","closed_at":"2026-02-01T18:35:50.404454-06:00","close_reason":"Closed","dependencies":[{"issue_id":"ghost-context-6f4","depends_on_id":"ghost-context-bf9","type":"blocks","created_at":"2026-02-01T18:04:02.324674-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-7yg","title":"Task 14: Security Verification","description":"Final security verification tests.\n\nTests:\n1. Build production bundle: npm run build\n2. Check for exposed keys: grep -r 'NEXT_PUBLIC_.*API_KEY' .next/static/\n3. Test rate limiting: 12 rapid POST requests, verify 429 after 10\n4. Test CSRF: curl with foreign Origin header, verify 403\n\nSuccess criteria:\n- No NEXT_PUBLIC API keys in bundle\n- Rate limiting returns 429 after threshold\n- CSRF returns 403 for foreign origins\n- All functionality works\n- Build and lint pass","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:52.275276-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:44:25.152846-06:00","closed_at":"2026-02-01T18:44:25.152846-06:00","close_reason":"All verifications passed: build succeeds, no NEXT_PUBLIC Alchemy keys in bundle, rate limiting returns 429 after 10 analysis requests, CSRF blocks foreign origins in production","dependencies":[{"issue_id":"ghost-context-7yg","depends_on_id":"ghost-context-6f4","type":"blocks","created_at":"2026-02-01T18:04:02.401418-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-8fu","title":"Task 3: Rewrite findCommonAssets function","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T13:46:52.997519-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T13:55:13.444617-06:00","closed_at":"2026-02-01T13:55:13.444617-06:00","close_reason":"Completed rewrite of findCommonAssets function","dependencies":[{"issue_id":"ghost-context-8fu","depends_on_id":"ghost-context-hzm","type":"blocks","created_at":"2026-02-01T13:47:02.046385-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-8xe","title":"Test: Alchemy Network Mapping Endpoint","description":"Verify /api/alchemy/network-mapping returns network data.\n\nTest:\ncurl -s https://ghost-context.vercel.app/api/alchemy/network-mapping\n\nExpected: {\"networks\":{\"ETH_MAINNET\":\"Ethereum\",\"MATIC_MAINNET\":\"Polygon\",...}}\n\nSuccess: Valid JSON with all 6 networks (ETH, MATIC, ARB, OPT, BASE, ZORA)","status":"in_progress","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:11.364175-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:50:34.499503-06:00"}
{"id":"ghost-context-97z","title":"Test: Error Handling - Unsupported Network","description":"Verify API returns proper error for invalid networks.\n\nTest:\ncurl -s \"https://ghost-context.vercel.app/api/alchemy/contract-metadata?network=INVALID_NETWORK\u0026contract=0x0000000000000000000000000000000000000000\"\n\nExpected: {\"error\":\"Unsupported network\"} with HTTP 400\n\nSuccess: Returns descriptive error with 400 status","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:53.51543-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:53.51543-06:00"}
{"id":"ghost-context-9i6","title":"Task 2: Integrate TopK into analyze-combined-overlap","description":"Import TopK into analyze-combined-overlap/route.js and replace the results compilation section to use TopK instead of sorting all entries.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:38:59.450715-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:48:05.426515-06:00","closed_at":"2026-02-01T14:48:05.426515-06:00","close_reason":"Integrated TopK into analyze-combined-overlap","dependencies":[{"issue_id":"ghost-context-9i6","depends_on_id":"ghost-context-c61","type":"blocks","created_at":"2026-02-01T14:39:21.376054-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-9pe","title":"Task 1: Extract fetchWalletAssets helper","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T13:46:49.056877-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T13:50:39.977769-06:00","closed_at":"2026-02-01T13:50:39.977769-06:00","close_reason":"Closed"}
{"id":"ghost-context-a10","title":"Test: Basic Functionality (Health \u0026 Homepage)","description":"Verify basic app functionality after deployment.\n\nTests:\n1. Homepage loads (200)\n   curl -s -o /dev/null -w \"%{http_code}\" https://ghost-context.vercel.app/\n\n2. Health check returns ok\n   curl -s https://ghost-context.vercel.app/api/health\n   Expected: {\"status\":\"ok\"}\n\nSuccess: Both return expected responses","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:08.774913-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:50:33.626965-06:00","closed_at":"2026-02-01T18:50:33.626965-06:00","close_reason":"PASSED: Homepage 200, Health check ok"}
{"id":"ghost-context-a7r","title":"[Feature] Performance Optimizations","description":"Reduce memory usage, minimize API calls, add persistent caching, enable streaming progress, and implement retry logic.\n\nPlan: docs/plans/2026-02-01-performance-optimizations-plan.md\nDesign: docs/plans/2026-01-09-performance-optimizations-design.md","status":"closed","priority":1,"issue_type":"feature","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:15.213011-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T15:04:14.280267-06:00","closed_at":"2026-02-01T15:04:14.280267-06:00","close_reason":"All performance optimizations complete: TopK, fetchWithRetry, caching, streaming, DataLoader","dependencies":[{"issue_id":"ghost-context-a7r","depends_on_id":"ghost-context-bxe","type":"blocks","created_at":"2026-02-01T14:39:25.271147-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-aq3","title":"Task 9: Create Client-Side Alchemy API Wrapper","description":"Create client-side wrapper for server-side Alchemy API routes.\n\nFiles:\n- Create: src/app/lib/alchemy-api.js\n\nExport functions:\n- getCollectionsForOwner(address, filter, networks)\n- getOwnersCountForContract(network, contract, maxCount)\n- getOwnersForContract(network, contract, pageKey)\n- getAllOwnersForContract(network, contract, maxOwners)\n\nAll functions call /api/alchemy/* routes instead of Alchemy SDK directly.\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:27.286253-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:22:21.592224-06:00","closed_at":"2026-02-01T18:22:21.592224-06:00","close_reason":"Created src/app/lib/alchemy-api.js with 4 wrapper functions","dependencies":[{"issue_id":"ghost-context-aq3","depends_on_id":"ghost-context-p0l","type":"blocks","created_at":"2026-02-01T18:04:02.042367-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-bdd","title":"Task 6: Create Alchemy Collections API Route","description":"Create server-side API route for Alchemy collections.\n\nFiles:\n- Create: src/app/api/alchemy/collections/route.js\n\nImplement GET handler that:\n- Accepts address, filter, networks params\n- Validates address\n- Creates AlchemyMultichainClient with server-side keys\n- Returns { collections, count }\n\nEnvironment vars: ALCHEMY_ETH_API_KEY, ALCHEMY_POLYGON_API_KEY, etc.\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:14.886837-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:15:53.664688-06:00","closed_at":"2026-02-01T18:15:53.664688-06:00","close_reason":"Created /api/alchemy/collections route with server-side keys","dependencies":[{"issue_id":"ghost-context-bdd","depends_on_id":"ghost-context-ms1","type":"blocks","created_at":"2026-02-01T18:04:01.824801-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-bf9","title":"Task 12: Update Server-Side Routes","description":"Update server routes to pass explicit Alchemy keys.\n\nFiles:\n- Modify: src/app/api/analyze-combined-overlap/route.js\n- Modify: src/app/api/analyze-combined-overlap/stream/route.js\n\nUpdate AlchemyMultichainClient instantiation to pass server-side keys explicitly:\n  const client = new AlchemyMultichainClient(\n    { apiKey: process.env.ALCHEMY_ETH_API_KEY },\n    { ... network overrides with server keys }\n  );\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:41.355205-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:33:36.395062-06:00","closed_at":"2026-02-01T18:33:36.395062-06:00","close_reason":"Closed","dependencies":[{"issue_id":"ghost-context-bf9","depends_on_id":"ghost-context-d4g","type":"blocks","created_at":"2026-02-01T18:04:02.254703-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-bp8","title":"Test: Alchemy Owners Count Endpoint","description":"Verify /api/alchemy/owners-count returns owner counts.\n\nTest:\ncurl -s \"https://ghost-context.vercel.app/api/alchemy/owners-count?network=ETH_MAINNET\u0026contract=0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D\"\n\nExpected: {\"ownerCount\": \u003cnumber\u003e} (BAYC has ~6000 owners)\n\nSuccess: Returns reasonable owner count for BAYC contract","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:21.273232-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:21.273232-06:00"}
{"id":"ghost-context-bxe","title":"Task 10: Update Design Doc and Cleanup","description":"Mark performance-optimizations-design.md as complete, delete implementation plan.","status":"closed","priority":3,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:13.778715-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T15:04:10.243766-06:00","closed_at":"2026-02-01T15:04:10.243766-06:00","close_reason":"Design doc updated, plan executed successfully","dependencies":[{"issue_id":"ghost-context-bxe","depends_on_id":"ghost-context-n3r","type":"blocks","created_at":"2026-02-01T14:39:24.690185-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-bxi","title":"Test: Alchemy Collections Endpoint","description":"Verify /api/alchemy/collections returns collection data for a wallet.\n\nTest:\ncurl -s \"https://ghost-context.vercel.app/api/alchemy/collections?address=0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045\u0026filter=relevant\"\n\nExpected: {\"collections\":[...]} with valid NFT collection objects\n\nSuccess: Returns non-empty collections array with name, contract_address, network fields","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:14.166657-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:14.166657-06:00"}
{"id":"ghost-context-c61","title":"Task 1: Create TopK Class","description":"Create src/app/lib/top-k.js with min-heap implementation for memory-efficient top-K result sorting. Memory: O(k) instead of O(n).","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:38:58.124609-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:45:28.511479-06:00","closed_at":"2026-02-01T14:45:28.511479-06:00","close_reason":"Created src/app/lib/top-k.js with min-heap implementation"}
{"id":"ghost-context-cmv","title":"Task 4: Integrate fetchWithRetry into API routes","description":"Update analyze-combined-overlap/route.js and get-filtered-tokens/route.js to use fetchWithRetry for Moralis API calls.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:01.816867-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:49:31.807062-06:00","closed_at":"2026-02-01T14:49:31.807062-06:00","close_reason":"fetchWithRetry integrated into both API routes","dependencies":[{"issue_id":"ghost-context-cmv","depends_on_id":"ghost-context-e2g","type":"blocks","created_at":"2026-02-01T14:39:22.174657-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-cs9","title":"Test: E2E - ENS Lookup and Collections Load","description":"Verify ENS lookup and collection fetching works.\n\nManual test steps:\n1. Open https://ghost-context.vercel.app\n2. Enter \"vitalik.eth\" in the ENS search field\n3. Wait for collections to load\n\nSuccess criteria:\n- Loading spinner appears\n- Collections table populates with NFT data\n- Images, names, and networks display correctly\n- Network filter dropdown has options","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:58.511282-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:58.511282-06:00"}
{"id":"ghost-context-d0h","title":"Task 5: Remove dead code (cleanup)","status":"closed","priority":3,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T13:46:54.659878-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:26:39.427376-06:00","closed_at":"2026-02-01T14:26:39.427376-06:00","close_reason":"No cleanup needed - lint and build pass","dependencies":[{"issue_id":"ghost-context-d0h","depends_on_id":"ghost-context-esf","type":"blocks","created_at":"2026-02-01T13:47:03.009833-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-d4g","title":"Task 11: Update Main Page Components","description":"Migrate main page components to use server-side Alchemy API.\n\nFiles:\n- Modify: src/app/components/NftTableList.js\n- Modify: src/app/components/KindredSpiritsList.js\n- Modify: src/app/page.js\n\nPattern:\n- Replace import { AlchemyMultichainClient } with import * as AlchemyAPI\n- Replace new AlchemyMultichainClient() with direct API calls\n- Replace alchemy.method() with AlchemyAPI.method()\n\nVerify: npm run build, test main page functionality","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:37.117303-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:32:09.95445-06:00","closed_at":"2026-02-01T18:32:09.95445-06:00","close_reason":"Closed","dependencies":[{"issue_id":"ghost-context-d4g","depends_on_id":"ghost-context-zm0","type":"blocks","created_at":"2026-02-01T18:04:02.181549-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-dja","title":"Test: E2E - Wallet Connection","description":"Verify wallet connection works in the UI.\n\nManual test steps:\n1. Open https://ghost-context.vercel.app\n2. Click \"Connect Wallet\" button\n3. Select a wallet provider (e.g., MetaMask)\n4. Approve connection in wallet\n\nSuccess: Wallet connects, address displayed in UI","status":"open","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:55.633987-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:55.633987-06:00"}
{"id":"ghost-context-e2g","title":"Task 3: Create fetchWithRetry Utility","description":"Create src/app/lib/fetch-with-retry.js with exponential backoff and jitter. Handles 429, 502, 503, 504 errors gracefully with automatic retries.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:00.70804-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:48:05.478852-06:00","closed_at":"2026-02-01T14:48:05.478852-06:00","close_reason":"Created fetch-with-retry.js"}
{"id":"ghost-context-eao","title":"Test: Rate Limiting Blocks After Threshold","description":"Verify analysis endpoints are rate limited to 10 req/min.\n\nTest:\nfor i in {1..12}; do\n  curl -s -o /dev/null -w \"Request $i: %{http_code}\\n\" -X POST \\\n    https://ghost-context.vercel.app/api/analyze-combined-overlap \\\n    -H \"Content-Type: application/json\" \\\n    -H \"Origin: https://ghost-context.vercel.app\" \\\n    -d '{\"address\":\"0x0000000000000000000000000000000000000000\"}'\ndone\n\nExpected: Requests 1-10 return 400, requests 11-12 return 429\n\nSuccess: 429 returned after 10 requests within 1 minute","status":"open","priority":1,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:42.392682-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:42.392682-06:00"}
{"id":"ghost-context-en4","title":"Task 1: Remove Moralis NEXT_PUBLIC Fallback","description":"Remove the NEXT_PUBLIC_MORALIS_API_KEY fallback from server-side routes.\n\nFiles:\n- Modify: src/app/api/analyze-combined-overlap/route.js:138\n- Modify: src/app/api/analyze-erc20-overlap/route.js:24\n\nChange:\n  const apiKey = process.env.MORALIS_API_KEY || process.env.NEXT_PUBLIC_MORALIS_API_KEY;\nTo:\n  const apiKey = process.env.MORALIS_API_KEY;\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:02:51.233501-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:08:34.106462-06:00","closed_at":"2026-02-01T18:08:34.106462-06:00","close_reason":"Removed NEXT_PUBLIC_MORALIS_API_KEY fallback from both analyze routes"}
{"id":"ghost-context-esf","title":"Task 4: Manual testing","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T13:46:53.753223-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:26:02.446425-06:00","closed_at":"2026-02-01T14:26:02.446425-06:00","close_reason":"Manual testing passed - optimization working correctly","dependencies":[{"issue_id":"ghost-context-esf","depends_on_id":"ghost-context-8fu","type":"blocks","created_at":"2026-02-01T13:47:02.529628-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-gxp","title":"Test: CSRF Protection - Missing Origin Blocked","description":"Verify requests without Origin header are rejected.\n\nTest:\ncurl -s -o /dev/null -w \"%{http_code}\" -X POST https://ghost-context.vercel.app/api/analyze-combined-overlap \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"address\":\"0x123\"}'\n\nExpected: 403 (Missing origin header)\n\nSuccess: Returns 403 Forbidden","status":"open","priority":1,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:36.799486-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:36.799486-06:00"}
{"id":"ghost-context-h8w","title":"Test: No API Keys in Browser Bundle","description":"Verify Alchemy API keys are not exposed in client-side JavaScript.\n\nTest (manual in browser):\n1. Open https://ghost-context.vercel.app\n2. Open DevTools â†’ Sources\n3. Search all files for: NEXT_PUBLIC_ETH_MAIN_API_KEY\n4. Search all files for: NEXT_PUBLIC_MATIC_MAIN_API_KEY\n\nExpected: No matches found\n\nAlso verify via curl (check main JS bundle):\ncurl -s https://ghost-context.vercel.app/_next/static/chunks/app/page-*.js | grep -o \"NEXT_PUBLIC_.*API_KEY\" | head -5\n\nSuccess: No Alchemy API key references in client bundle","status":"open","priority":1,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:46.561821-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:46.561821-06:00"}
{"id":"ghost-context-hg1","title":"Task 5: Set Up Vercel KV and Create Cache Utility","description":"Install @vercel/kv package and create src/app/lib/cache.js with getCached helper that gracefully degrades when KV unavailable.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:03.126192-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:48:05.532152-06:00","closed_at":"2026-02-01T14:48:05.532152-06:00","close_reason":"Created cache.js with Vercel KV"}
{"id":"ghost-context-hzm","title":"Task 2: Extract computeIntersection helper","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T13:46:52.503128-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T13:51:38.343542-06:00","closed_at":"2026-02-01T13:51:38.343542-06:00","close_reason":"Closed","dependencies":[{"issue_id":"ghost-context-hzm","depends_on_id":"ghost-context-9pe","type":"blocks","created_at":"2026-02-01T13:47:01.419057-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-ix0","title":"[Feature] Deployment Verification Testing","description":"Verify all security hardening changes work correctly in production after deployment to Vercel.","status":"open","priority":1,"issue_type":"feature","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:47:02.250371-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:47:02.250371-06:00","dependencies":[{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-a10","type":"blocks","created_at":"2026-02-01T18:48:22.40359-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-8xe","type":"blocks","created_at":"2026-02-01T18:48:22.474398-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-bxi","type":"blocks","created_at":"2026-02-01T18:48:22.545657-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-08m","type":"blocks","created_at":"2026-02-01T18:48:22.61474-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-bp8","type":"blocks","created_at":"2026-02-01T18:48:22.688268-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-1jw","type":"blocks","created_at":"2026-02-01T18:48:22.757543-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-1sf","type":"blocks","created_at":"2026-02-01T18:48:22.827623-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-27t","type":"blocks","created_at":"2026-02-01T18:48:22.90345-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-gxp","type":"blocks","created_at":"2026-02-01T18:48:22.974616-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-2aq","type":"blocks","created_at":"2026-02-01T18:48:23.044917-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-eao","type":"blocks","created_at":"2026-02-01T18:48:23.112763-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-h8w","type":"blocks","created_at":"2026-02-01T18:48:23.186241-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-2g0","type":"blocks","created_at":"2026-02-01T18:48:23.259071-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-97z","type":"blocks","created_at":"2026-02-01T18:48:23.331946-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-dja","type":"blocks","created_at":"2026-02-01T18:48:23.408644-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-cs9","type":"blocks","created_at":"2026-02-01T18:48:23.482045-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-0a8","type":"blocks","created_at":"2026-02-01T18:48:23.555023-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-ix0","depends_on_id":"ghost-context-5ue","type":"blocks","created_at":"2026-02-01T18:48:23.626758-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-jnr","title":"Task 7: Create Streaming Analysis Endpoint","description":"Create src/app/api/analyze-combined-overlap/stream/route.js with Server-Sent Events for real-time progress updates during analysis.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:10.309562-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T14:51:19.225668-06:00","closed_at":"2026-02-01T14:51:19.225668-06:00","close_reason":"Created streaming endpoint with SSE"}
{"id":"ghost-context-ms1","title":"Task 5: Create Rate Limiting Middleware","description":"Create Edge middleware for API rate limiting.\n\nFiles:\n- Create: middleware.js (project root)\n\nImplement:\n- 60 requests/min for general API routes\n- 10 requests/min for analysis endpoints (expensive)\n- In-memory rate limit store with cleanup\n- X-RateLimit-* headers on responses\n- 429 response when limit exceeded\n\nVerify: npm run build succeeds, test with rapid curl requests","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:10.143266-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:12:23.576631-06:00","closed_at":"2026-02-01T18:12:23.576631-06:00","close_reason":"Created middleware.js with rate limiting (60/min API, 10/min analysis)","dependencies":[{"issue_id":"ghost-context-ms1","depends_on_id":"ghost-context-sni","type":"blocks","created_at":"2026-02-01T18:04:01.748012-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-n3r","title":"Task 9: Manual Testing","description":"Set up Vercel KV in dashboard, deploy, and test: TopK memory, retry logic, caching, streaming progress.","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T14:39:12.659462-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T15:04:09.400429-06:00","closed_at":"2026-02-01T15:04:09.400429-06:00","close_reason":"Testing complete - fixed Common Assets speed with get-tokens-fast","dependencies":[{"issue_id":"ghost-context-n3r","depends_on_id":"ghost-context-9i6","type":"blocks","created_at":"2026-02-01T14:39:23.857198-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-n3r","depends_on_id":"ghost-context-cmv","type":"blocks","created_at":"2026-02-01T14:39:23.928258-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-n3r","depends_on_id":"ghost-context-4iz","type":"blocks","created_at":"2026-02-01T14:39:24.000906-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-n3r","depends_on_id":"ghost-context-jnr","type":"blocks","created_at":"2026-02-01T14:39:24.078294-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-n3r","depends_on_id":"ghost-context-2la","type":"blocks","created_at":"2026-02-01T14:39:24.148365-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-p0l","title":"Task 8: Create Alchemy Owners List API Route","description":"Create server-side API route for Alchemy owners list (paginated).\n\nFiles:\n- Create: src/app/api/alchemy/owners/route.js\n\nImplement GET handler that:\n- Accepts network, contract, pageKey params\n- Uses Alchemy SDK directly with server keys\n- Returns { owners, pageKey }\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:22.300734-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:21:30.630192-06:00","closed_at":"2026-02-01T18:21:30.630192-06:00","close_reason":"Created /api/alchemy/owners route with pagination","dependencies":[{"issue_id":"ghost-context-p0l","depends_on_id":"ghost-context-pos","type":"blocks","created_at":"2026-02-01T18:04:01.971058-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-pnn","title":"[Feature] Security Hardening","description":"Remove API key exposure from browser bundle, add rate limiting, and add CSRF protection.\n\nDesign: docs/plans/2026-01-09-security-hardening-design.md\nPlan: docs/plans/2026-02-01-security-hardening-plan.md\n\nPhases:\n- Phase 1: Quick fixes (Moralis fallback, error disclosure)\n- Phase 2: CSRF protection\n- Phase 3: Rate limiting\n- Phase 4: Alchemy server-side migration\n- Phase 5: Final verification","status":"closed","priority":1,"issue_type":"feature","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:02:45.761059-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:44:29.600161-06:00","closed_at":"2026-02-01T18:44:29.600161-06:00","close_reason":"Security hardening complete: CSRF protection, rate limiting, server-side Alchemy API migration","dependencies":[{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-en4","type":"blocks","created_at":"2026-02-01T18:04:10.830007-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-0vk","type":"blocks","created_at":"2026-02-01T18:04:10.898874-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-qlc","type":"blocks","created_at":"2026-02-01T18:04:10.972157-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-sni","type":"blocks","created_at":"2026-02-01T18:04:11.040434-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-ms1","type":"blocks","created_at":"2026-02-01T18:04:11.112484-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-bdd","type":"blocks","created_at":"2026-02-01T18:04:11.184889-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-pos","type":"blocks","created_at":"2026-02-01T18:04:11.2542-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-p0l","type":"blocks","created_at":"2026-02-01T18:04:11.32303-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-aq3","type":"blocks","created_at":"2026-02-01T18:04:11.394308-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-zm0","type":"blocks","created_at":"2026-02-01T18:04:11.464879-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-d4g","type":"blocks","created_at":"2026-02-01T18:04:11.541338-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-bf9","type":"blocks","created_at":"2026-02-01T18:04:11.61481-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-6f4","type":"blocks","created_at":"2026-02-01T18:04:11.689947-06:00","created_by":"Sloan Ahrens"},{"issue_id":"ghost-context-pnn","depends_on_id":"ghost-context-7yg","type":"blocks","created_at":"2026-02-01T18:04:11.764149-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-pos","title":"Task 7: Create Alchemy Owners Count API Route","description":"Create server-side API route for Alchemy owner counts.\n\nFiles:\n- Create: src/app/api/alchemy/owners-count/route.js\n\nImplement GET handler that:\n- Accepts network, contract, maxCount params\n- Validates contract address format\n- Returns { ownerCount }\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:18.678622-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:20:37.722535-06:00","closed_at":"2026-02-01T18:20:37.722535-06:00","close_reason":"Created /api/alchemy/owners-count route","dependencies":[{"issue_id":"ghost-context-pos","depends_on_id":"ghost-context-bdd","type":"blocks","created_at":"2026-02-01T18:04:01.902902-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-qlc","title":"Task 3: Create CSRF Validation Utility","description":"Create CSRF protection utility for origin validation.\n\nFiles:\n- Create: src/app/lib/csrf.js\n\nImplement validateOrigin(request) function that:\n- Allows requests from ghost-context.vercel.app and localhost\n- Is permissive in development mode\n- Returns 403 for invalid origins in production\n- Checks both Origin and Referer headers\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:00.761795-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:10:10.446827-06:00","closed_at":"2026-02-01T18:10:10.446827-06:00","close_reason":"Created src/app/lib/csrf.js with validateOrigin function","dependencies":[{"issue_id":"ghost-context-qlc","depends_on_id":"ghost-context-0vk","type":"blocks","created_at":"2026-02-01T18:04:01.598798-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-sni","title":"Task 4: Add CSRF Protection to POST Endpoints","description":"Add CSRF validation to all POST endpoints.\n\nFiles:\n- Modify: src/app/api/analyze-combined-overlap/route.js\n- Modify: src/app/api/analyze-combined-overlap/stream/route.js\n- Modify: src/app/api/analyze-erc20-overlap/route.js\n\nAdd at start of each POST handler:\n  import { validateOrigin } from '../../lib/csrf.js';\n  const originError = validateOrigin(request);\n  if (originError) return originError;\n\nVerify: npm run build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:05.39483-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:11:28.507457-06:00","closed_at":"2026-02-01T18:11:28.507457-06:00","close_reason":"Added CSRF validation to all 3 POST endpoints","dependencies":[{"issue_id":"ghost-context-sni","depends_on_id":"ghost-context-qlc","type":"blocks","created_at":"2026-02-01T18:04:01.673777-06:00","created_by":"Sloan Ahrens"}]}
{"id":"ghost-context-zm0","title":"Task 10: Update test-common-assets to Use New API","description":"Migrate test-common-assets page to use server-side Alchemy API.\n\nFiles:\n- Modify: src/app/test-common-assets/page.js\n\nChanges:\n- Replace import { AlchemyMultichainClient } with import * as AlchemyAPI\n- Update fetchWalletAssets to use AlchemyAPI.getCollectionsForOwner\n- Update fetchAssets to use AlchemyAPI.getCollectionsForOwner\n- Update fetchNFTOwnerCounts to use AlchemyAPI.getOwnersCountForContract\n\nVerify: npm run build, test page at /test-common-assets","status":"closed","priority":2,"issue_type":"task","owner":"sloan.ahrens@gmail.com","created_at":"2026-02-01T18:03:32.622276-06:00","created_by":"Sloan Ahrens","updated_at":"2026-02-01T18:23:53.941976-06:00","closed_at":"2026-02-01T18:23:53.941976-06:00","close_reason":"Migrated test-common-assets to use AlchemyAPI wrapper","dependencies":[{"issue_id":"ghost-context-zm0","depends_on_id":"ghost-context-aq3","type":"blocks","created_at":"2026-02-01T18:04:02.110858-06:00","created_by":"Sloan Ahrens"}]}
